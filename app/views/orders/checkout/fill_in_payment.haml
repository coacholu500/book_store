.col-sm-12.col-md-10.col-md-offset-1
  .panel.with-nav-tabs.panel-info
    .panel-heading
      .panel-title
        .row
          .col-xs-2
            %h4
              %b
                = t("current_order.checkout")
          %ul.nav.nav-tabs
            %li= link_to "Address", fill_in_address_checkout_path
            %li= link_to "Delivery", fill_in_delivery_checkout_path
            %li.active= link_to "Payment", fill_in_payment_checkout_path
            %li.disabled= link_to "Confirm", confirm_checkout_path
            %li.disabled= link_to "Complete", "#"
    .panel-body
      .col-xs-4.col-md-offset-1.pull-right
        %u
          %h3 Order Summary
        %b Item total:
        $#{@current_order.real_price}
        %br
        %b Shipping:
        $#{@current_order.delivery.price}
        %br
        %b Order total:
        $#{@current_order.price_with_delivery}
      = form_for current_or_guest_user,  url: checkout_path do |f|
        = devise_error_messages!
        .col-xs-4
          %u
            %h3 Payment:
          %br
          = f.fields_for :orders, @current_order do |order|
            = order.hidden_field :credit_card_id, value: current_or_guest_user.credit_card.id
          = f.fields_for :credit_card, @credit_card do |card|
            .col-xs-12
              %h4
                %label.control-label Card Holder's Name
            .col-xs-6.col-md-6
              .form-group
                = card.text_field :first_name,  class: "form-control", placeholder: "First name"
            .col-xs-6.col-md-6.pull-right
              .form-group
                = card.text_field :last_name,  class: "form-control", placeholder: "Last name"
            .col-xs-12.form-group
              .input-group
                = card.text_field :number, class: "form-control", placeholder: "Card Number", autocomplete: "cc-number"
                %span.input-group-addon
                  %span.fa.fa-credit-card
            .col-xs-12
              %h4
                %label Card Expiry Date
            .col-xs-6.col-md-6
              .form-group
                = card.number_field :exp_month, min: 1, max: 12, class: "form-control", placeholder: "MM"
            .col-xs-6.col-md-6
              .form-group
                = card.number_field :exp_year, min: Time.now.year, class: "form-control", placeholder: "YY"
            .col-xs-6
              %label CVV code
              .form-group
                = card.text_field :cvv, class: "form-control", placeholder: "cvv"
          .col-xs-6.col-md-offset-1
            = f.button "Save and Continue", :name => "checkout", value: "payment", class: "btn btn-primary"

